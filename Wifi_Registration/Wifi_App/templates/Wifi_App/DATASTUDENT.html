{% extends 'Wifi_App/head2.html' %}
{% load static %}

{% block title %}DATA STUDENT{% endblock title %}

{% block content %}
<div class="dropdown show">
  {% if count != 0%}
  <a class="dropdown-toggle text-danger" href="#" role="button" id="dropdownMenuLink" 
  data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
  {% else %}
  <a class="dropdown-toggle text-success" href="#" role="button" id="dropdownMenuLink" 
  data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
  {% endif %}
  {% if count != 0%}<i class="fa-solid fa-person-circle-exclamation"></i>{% else %}<i class="fa-solid fa-person-circle-check"></i>{% endif %}</a>
  <div class="dropdown-menu dropdown-menu-right" id="drop" aria-labelledby="dropdownMenuLink">
    <a class="btn btn-block" href="{% url 'datafaculty' %}"><i class="fa-solid fa-user-group"></i> FACULTY {% if count == 0 %}<i class="fa-regular fa-circle-check"></i>
      {% else %}<span class="badge badge-danger">{{ count }}</span>{% endif %}</a>
     <div class="dropdown-divider m-0"></div>
     <a class="btn btn-block" href="{% url 'datahistory' %}"><i class="fa-solid fa-clock-rotate-left"></i>   HISTORY</a>
  </div>
</div>
{% endblock content %}

{% block body %}
          <div class="jumbotron table-responsive-sm table-sortable mt-3 rounded">
             <div class="card-body">
               <h4 class="card-title" style="margin-bottom: 50px;">WIFI REQUEST (STUDENT'S REQUEST)</h4>
             </div>
                <table id="studreq" class="table table-striped table-bordered">
                <thead class="table-danger">
                    <tr>
                       <th scope="col" style="text-align: center;">Name</th>
                       <th scope="col" style="text-align: center;">Course</th>
                       <th scope="col" style="text-align: center;">Semester</th>
                       <th scope="col" style="text-align: center;">TUPC-ID</th>
                       <th scope="col" style="text-align: center;">Or No.</th>
                       <th scope="col" style="text-align: center;">Phone No.</th>
                       <th scope="col" style="text-align: center;">System</th>
                       <th scope="col" style="text-align: center;">Others</th>
                       <th scope="col" style="text-align: center;">Mac Address</th>
                       <th scope="col" style="text-align: center;">Email</th>
                       <th scope="col" style="text-align: center;">Home Address</th>
                       <th scope="col" style="text-align: center;">Signature</th>
                       <th scope="col" style="text-align: center;">Approval</th>
                    </tr>
                 </thead>
                 <tbody>
                   {% for obj in student_request %}
                   <tr>
                       <th scope="row" style="text-align: center;">{{ obj.names }}</th>
                       <td style="text-align: center;">{{ obj.course }}</td>
                       <td style="text-align: center;">{{ obj.semester }}</td>
                       <td style="text-align: center;">{{ obj.tupid }}</td>
                       <td style="text-align: center;">{{ obj.orNum }}</td>
                       <td style="text-align: center;">0{{ obj.phoneNum }}</td>
                       <td style="text-align: center;">{{ obj.device }}</td>
                       <td style="text-align: center;">{{ obj.otherDevice }}</td>
                       <td style="text-align: center;">{{ obj.macadd }}</td>
                       <td style="text-align: center;">{{ obj.emails }}</td>
                       <td style="text-align: center;">{{ obj.residAdd }}</td>
                       <td style="text-align: center;"><img class="rounded" src="{{ obj.signature.url }}" width="150" height="100" alt="{{ obj.signature }}"></td>
                       <td style="text-align: center;">
                         <span >
                             <a data-toggle="modal" data-target="#myModal"  class="btn btn-success mb-1" style="padding: 10px 24px;">Approve</a>
                         </span>
                         <span>
                             <a data-toggle="modal" data-target="#myModal2"  class="btn btn-danger" style="padding: 10px 32px;">Reject</a>
                         </span>
                     </td>
                    </tr>
                     <!-- The Modal -->
    <div class="modal fade" id="myModal">
      <div class="modal-dialog modal-dialog-centered">
          <div class="modal-content">
      
              <!-- Modal Header -->
              <div class="modal-header">
                  <h5 class="modal-title text-danger">CONFIRMATION : <em>"accept"</em></h5>
                  <button type="button" class="close" data-dismiss="modal"><i class="fa-solid fa-arrow-right-from-bracket" id="back"></i></button>
              </div>
              
              <!-- Modal footer -->
              <div class="modal-footer d-flex justify-content-left">
                <a href="/acceptStudent/{{ obj.tupid }}" class="btn btn-success">YES</a>
                  <button type="button" class="btn text-muted" data-dismiss="modal">NO</button>
              </div>
          </div>
      </div>
  </div>

                <!-- The Modal -->
    <div class="modal fade" id="myModal2">
      <div class="modal-dialog modal-dialog-centered">
          <div class="modal-content">
      
              <!-- Modal Header -->
              <div class="modal-header">
                  <h5 class="modal-title text-danger">CONFIRMATION : <em>"reject"</em></h5>
                  <button type="button" class="close" data-dismiss="modal"><i class="fa-solid fa-arrow-right-from-bracket" id="back"></i></button>
              </div>
              
              <!-- Modal footer -->
              <div class="modal-footer d-flex justify-content-left">
                <a href="/rejectStudent/{{ obj.tupid }}" class="btn btn-success">YES</a>
                  <button type="button" class="btn text-muted" data-dismiss="modal">NO</button>
              </div>
          </div>
      </div>
  </div>
  {% endfor %}

               </tbody>
             </table>
          </div>
                    
          <script>
             $(document).ready(function() {
                  $('#studreq').DataTable({
                        scrollY: 400,
                        scrollCollapse: true,
                        paging : false,
                  })})
          </script>
{% endblock body %}