{% extends 'Wifi_App/head2.html' %}
{% load static %}

{% block title %}DATA HISTORY{% endblock title %}
      
{% block content %}
</li>
<div class="dropdown show">
   {% if countA != 0 or  countB != 0%}
   <a class="dropdown-toggle text-danger" href="#" role="button" id="dropdownMenuLink" 
   data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
   {% else %}
   <a class="dropdown-toggle text-success" href="#" role="button" id="dropdownMenuLink" 
   data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
   {% endif %}
   {% if countA != 0 or  countB != 0%}<i class="fa-solid fa-person-circle-exclamation"></i>{% else %}<i class="fa-solid fa-person-circle-check"></i>{% endif %}</a>
   <div class="dropdown-menu dropdown-menu-right" id="drop" aria-labelledby="dropdownMenuLink">
      <a class="btn btn-block" href="{% url 'datastudent' %}"><i class="fa-solid fa-graduation-cap"></i> STUDENT {% if countA == 0 %}<i class="fa-regular fa-circle-check"></i>
         {% else %}<span class="badge badge-danger">{{ countA }}</span>{% endif %}</a>
      <div class="dropdown-divider m-0"></div>
      <a class="btn btn-block" href="{% url 'datafaculty' %}"><i class="fa-solid fa-user-group"></i> FACULTY {% if countB == 0 %}<i class="fa-regular fa-circle-check"></i>
         {% else %}<span class="badge badge-danger">{{ countB }}</span>{% endif %}</a>
   </div>
</div>
{% endblock content %}

{% block body %}
      {% include 'Wifi_App/success-login.html' %}
   <div class="jumbotron table-responsive table-sortable mt-3 rounded">
      <div class="card-body">
         <h4 class="card-title" style="margin-bottom: 50px;">HISTORY OF APPROVAL 
            <a href="{% url 'pdf' %}"><i class="fa-solid fa-print"></i></a> <a href="{% url 'csv' %}"><i class="fa-solid fa-file-csv"></i></a></h4>
      </div>
      
      <table id="historydata" class="table table-striped table-bordered">
         <thead class="table-danger">
            <tr>
               <th scope="col" style="text-align: center;">Email</th>
               <th scope="col" style="text-align: center;">Type</th>
               <th scope="col" style="text-align: center;">Time of Request</th>
               <th scope="col" style="text-align: center;">Time of Evaluation</th>
            </tr>
         </thead>            
         <tbody>
            {% for obj in history %}
            <tr>
               <th scope="row" style="text-align: center;">
               {% if obj.emailed %}
                  {% if obj.emailed.email == 'ACCEPTED' %}
                  <p class="text-success" style="text-align: center;">{{ obj.emailed.email }}</p>
                  {% elif obj.emailed.email == 'REJECTED' %}
                  <p class="text-danger" style="text-align: center;">{{ obj.emailed.email }}</p>
                  {% else %}
                  <p style="text-align: center;">{{ obj.emailed.email }}</p>
                  {% endif %}
               {% endif %}
               </th>
               <td style="text-align: center;">{{ obj.emailed.userType }}</td>
               <td style="text-align: center;">{{ obj.dateCreated }}</td>
               <td style="text-align: center;">{{ obj.dateEvaluated }}</td>
            </tr>
            {% endfor %}
         </tbody>
      </table>
   </div>

   <script>
         $(document).ready(function() {
            $('#historydata').DataTable({
               scrollCollapse: true,
               paging : false,
            })})
   </script>
{% endblock body %}